name: Despliegue Autom√°tico

on:
  push:
    branches:
      - develop

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repo
      uses: actions/checkout@v2

    - name: Setup JDK
      uses: actions/setup-java@v2
      with:
        java-version: '17'

    - name: Build with Maven
      run: mvn clean verify

    - name: Lint with Spotbugs
      run: mvn spotbugs:check

    - name: Promote to Main Branch
      if: ${{ success() }}
      uses: "twilio-labs/actions-promote-to-main@v1"
      with:
        source_branch: develop
        destination_branch: main
        commit_message: "Promote changes from develop to main"
        force_push: true

